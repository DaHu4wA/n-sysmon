
<script type="text/ng-template" id="trace_node_template.html">
    <div class="data-row data-row-{{curNode.level - rootLevel}} {{dataRowSubdued(curNode)}}" ng-click="clickTreeNode($event, curNode)">
        <div class="node-icon {{nodeIconClass(curNode)}}">&nbsp;</div>
        <div ng-repeat="curCol in columnDefs" ng-class="colClass($index)">
            <div ng-if="isPercentage(columnDefs[$index]) && !isSubdued(curNode)" class="aprogress-background"><div class="aprogress-bar" style="{{progressWidthStyle(curNode.data[revIdx($index)])}}">{{formatNumber(curNode.data[revIdx($index)], columnDefs[$index].numFracDigits)}}</div></div>
            <div ng-if="isPercentage(columnDefs[$index]) &&  isSubdued(curNode)" class="subdued-progress-background">{{formatNumber(curNode.data[revIdx($index)], columnDefs[$index].numFracDigits)}}</div>
            <div ng-if="!isPercentage(columnDefs[$index])">{{formatNumber(curNode.data[revIdx($index)], columnDefs[$index].numFracDigits)}}</div>
        </div>
        <div class="node-text" style="margin-right: {{totalDataWidth}}px;">{{curNode.name}}</div>
    </div>
    <div class="children" style="display: {{expansionStyle(curNode)}};">
        <div ng-repeat="curNode in curNode.children" ng-include="'trace_node_template.html'"/>
    </div>
</script>

<div class="button-segment">
    <div class="button-box">
        <div class="btn-group">
            <a class="btn btn-default" ng-click="expandAll()" data-toggle="tooltip" title="Expand All"><img src="_$_asysmon_$_/static/img/treenode-closed.png" /></a>
            <a class="btn btn-default" ng-click="collapseAll()" data-toggle="tooltip" title="Collapse All"><img src="_$_asysmon_$_/static/img/treenode-open.png" /></a>
        </div>
        <div class="btn-group">
            <a class="btn {{pickClass()}}" ng-click="togglePickMode()" data-toggle="tooltip" title="Click on a node to show only that node and its children">Pick</a>
            <a id="unpick" class="btn btn-default" ng-click="unpick()" data-toggle="tooltip" title="Undo the effect of previous 'pick' operation, showing all root nodes">Unpick</a>
        </div>
        <div class="btn-group">
            <a class="btn btn-default" ng-click="refresh()" data-toggle="tooltip" title="Fetch fresh data from the server">Refresh</a>
            <a class="btn btn-default" ng-click="clear()" data-toggle="tooltip" title="Discard recorded data in the server">Clear</a>
            <a class="btn btn-default" ng-if="!isStarted" ng-click="start()" data-toggle="tooltip" title="Start recording data in the server">Start</a>
            <a class="btn btn-default" ng-if="isStarted" ng-click="stop()" data-toggle="tooltip" title="Stop recording data in the server">Stop</a>
        </div>
        <a class="btn btn-default" ng-click="doExport()" data-toggle="tooltip" title="Export currently visible data to Excel as CSV">Export</a>
    </div>
</div>

<div ng-repeat="curNode in pickedTraces">
    <div class='table-header'>&nbsp;<div style="float: right;">
        <div ng-repeat="curCol in columnDefs" ng-class="colClass($index)">{{curCol.name}}</div>
    </div></div>

    <div ng-include="'trace_node_template.html'"></div>
</div>
